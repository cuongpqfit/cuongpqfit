import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import javax.net.ssl.*;
import java.net.URL;
import java.security.SecureRandom;
import java.security.cert.X509Certificate;

public class UnsafeSoapHttpsClient {
    public static void main(String[] args) {
        try {
            // Bỏ qua kiểm tra chứng chỉ SSL (không an toàn)
            trustAllCertificates();

            // URL của WSDL từ dịch vụ HTTPS
            URL wsdlURL = new URL("https://example.com/service?wsdl");

            // Tên không gian và tên dịch vụ
            QName SERVICE_NAME = new QName("http://example.com/", "MyService");

            // Tạo service
            Service service = Service.create(wsdlURL, SERVICE_NAME);

            // Tạo proxy đến service
            MyServiceInterface port = service.getPort(MyServiceInterface.class);

            // Gọi phương thức từ dịch vụ web
            String response = port.myWebMethod("Hello");
            System.out.println("Response from service: " + response);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    // Phương thức bỏ qua kiểm tra chứng chỉ SSL
    private static void trustAllCertificates() throws Exception {
        TrustManager[] trustAllCerts = new TrustManager[] {
            new X509TrustManager() {
                public X509Certificate[] getAcceptedIssuers() { return null; }
                public void checkClientTrusted(X509Certificate[] certs, String authType) { }
                public void checkServerTrusted(X509Certificate[] certs, String authType) { }
            }
        };

        SSLContext sc = SSLContext.getInstance("SSL");
        sc.init(null, trustAllCerts, new SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        HttpsURLConnection.setDefaultHostnameVerifier((hostname, session) -> true);
    }
}
